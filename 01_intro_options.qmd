---
title: Pricing and Hedging Derivative Securities
subtitle: Introduction to Options

format:
  revealjs:
    theme: custom-dark.scss
    transition: slide
    slide-number: true
    chalkboard: true
    incremental: false
    fig-width: 10
    fig-height: 5
execute:
  echo: false
jupyter: python3
engine: jupyter
---

```{python}
#| echo: false

import numpy as np
import plotly.graph_objects as go
import plotly.express as px
from IPython.display import display, HTML
import plotly
plotly.offline.init_notebook_mode(connected=True)
```


## What Are Derivatives? {data-state="grid-medium"}

**Derivative securities** are financial instruments whose values are *derived* from an underlying asset, index, or rate.

::: {.incremental}
- **Underlying assets** can be:
  - Stocks, bonds, commodities
  - Currencies, interest rates
  - Market indices
- Value fluctuates based on changes in the underlying
- Used for hedging risks and speculation
:::

## Trading Venues {data-state="grid-coarse"}

::::  {.columns}
::: {.column width="50%"}
**Exchange-Traded**

- Traded on regulated exchanges (CME, NYSE, ICE)
- Standardized contracts
- Centralized clearing
- Price transparency
- High liquidity
:::

::: {.column width="50%"}
**Over-the-Counter (OTC)**

- Private bilateral contracts
- Customizable terms
- Higher counterparty risk
- Less transparency
- Tailored solutions
:::
::::


## Options {data-state="grid-medium"}

For the remainder of this lecture, we'll focus on **options** - the most versatile derivatives.

::: {.incremental}


- **Call option**: Right to **buy** an asset at a fixed price (the strike)
- **Put option**: Right to **sell** an asset at a fixed price (the strike)

The buyer pays the seller a **premium** upfront for this right.
:::


Options are particularly important for several reasons:

::: {.incremental}
- **Widely traded**: Billions of contracts annually across global exchanges
- **Versatile**: Can be used for speculation, hedging, or income generation
- **Building blocks**: Understanding options helps with other derivatives

:::

## Option Basics: Key Terminology {data-state="grid-sparse"}


- **Premium**: Price paid to buy the option
- **Strike Price (K)**: Fixed price at which option can be exercised
- **Expiration Date**: When the contract ends
- **Exercise**: Using the right granted by the option
- **Underlying Asset**: The financial instrument the option is based on


## American vs. European Options {data-state="grid-coarse"}

Despite the names, both trade worldwide!

::::  {.columns}
::: {.column width="50%"}
**American Options**

- Can be exercised **any time** before expiration
- More flexibility
- More common on exchanges
- Slightly more expensive
:::

::: {.column width="50%"}
**European Options**

- Can only be exercised **at expiration**
- Less flexibility
- Simpler to price
- Common in indices and OTC contracts
:::
::::

## Rights, Obligations, and Motivations {data-state="grid-fine"}

::::  {.columns}
::: {.column width="50%"}
**Option Buyers (Long)**

- Pay premium upfront
- Have **rights**, no obligations
- Choose whether to exercise
- Max loss = premium paid
- Motivations:
  - Speculation with leverage
  - Hedging/insurance
:::

::: {.column width="50%"}
**Option Sellers (Short)**

- Receive premium upfront
- Have **obligations**
- Must fulfill if exercised
- Potentially unlimited losses
- Motivation:
  - Collect premium income
:::
::::

## Interactive Market Data {data-state="grid-none"}

Let's explore real option prices:

::: {#fig-options-market-data}
<iframe height="800" width="100%" src="https://options-market-data.koyeb.app/"></iframe>

Real market data from CBOE via Yahoo Finance
:::

## Patterns in Option Prices: Strike Effects {data-state="grid-sparse"}

Experimenting with the market data reveals consistent patterns:

::: {.incremental}
**Call Options:**

- Prices **decrease** as strike prices increase
- Call with strike $50 > Call with strike $100
- *Why?* Lower strike = more valuable right to buy

**Put Options:**

- Prices **increase** as strike prices increase
- Put with strike $100 > Put with strike $50
- *Why?* Higher strike = more valuable right to sell
:::

## Patterns in Option Prices: Time Effects {data-state="grid-dense"}

**Time to expiration matters:**

::: {.incremental}
- Longer-dated options cost **more** than shorter-dated options
- Why?
  - More time for favorable price movements
  - Greater flexibility (American options)
  - Higher uncertainty

This pattern holds for both calls and puts,
:::



## Intrinsic Value {data-state="grid-fine"}

**Intrinsic value** = What the option is worth if exercised immediately (or at expiration)

::::  {.columns}
::: {.column width="50%"}
**Call Option:**

$$\text{Intrinsic Value} = \max(S - K, 0)$$

- If $S = \$50$, $K = \$40$
- Intrinsic value = $\$10$
- Can buy at $\$40$, sell at $\$50$
:::

::: {.column width="50%"}
**Put Option:**

$$\text{Intrinsic Value} = \max(K - S, 0)$$

- If $S = \$50$, $K = \$60$
- Intrinsic value = $\$10$
- Can buy at $\$50$, sell at $\$60$
:::
::::

## Moneyness: ITM, ATM, OTM {data-state="grid-coarse"}

Options are classified by their relationship to the current price:

| Moneyness | Call Option | Put Option |
|-----------|-------------|------------|
| **In the Money (ITM)** | $S > K$ | $S < K$ |
| **At the Money (ATM)** | $S \approx K$ | $S \approx K$ |
| **Out of the Money (OTM)** | $S < K$ | $S > K$ |

- **ITM**: Positive intrinsic value
- **ATM/OTM**: Zero intrinsic value

## Time Value and Time Decay {data-state="grid-coarse"}

**Time value** = Option price - Intrinsic value

::: {.incremental}
- Options are usually worth **more** than intrinsic value before expiration
- Why? Potential for favorable price movements
- **Time decay**: Time value decreases as expiration approaches
- At expiration: Time value = 0, Option value = Intrinsic value

American options are always worth **at least** their intrinsic value (otherwise arbitrage!)
:::

## Key Insights About Options {data-state="grid-coarse"}

Options differ fundamentally from other financial instruments:

::: {.incremental}
1. **Non-linear payoffs**: Not just multiples of the underlying
2. **Asymmetric risk/reward**: Different for buyers vs. sellers
3. **Time decay**: Value erodes as expiration approaches
4. **Volatility sensitivity**: Option prices increase with uncertainty
5. **Multiple dimensions**: Price, time, volatility all matter

These properties make options powerful but complex!
:::


## Trading Options on Exchanges {data-state="grid-fine"}

Most options are traded on organized exchanges:

::: {.incremental}
- **Standardized contracts**: Fixed strikes and expirations
- **Transparent pricing**: Public order books
- **Clearinghouse guarantee**: Eliminates counterparty risk
- **Most positions closed before expiration**: Through offsetting trades rather than exercise
:::

## Strikes and Maturities {data-state="grid-fine"}

Exchanges determine which options are available:

::: {.incremental}
- **Strike prices**: Added to bracket the current market price
  - New strikes introduced as underlying price moves
  - Typically spaced at regular intervals

- **Expiration dates**:
  - Weekly, monthly, and quarterly options
  - New expirations added as older ones expire
  - Availability depends on trading interest
:::



## Open Interest and Contract Creation {data-state="grid-coarse"}

Unlike stocks, options have **no pre-existing supply**:

::: {.incremental}
- **Long position**: Option buyer
- **Short position**: Option seller
- **Open Interest**: Total number of long (= short) positions

**How open interest changes:**

- New buyer + New seller → Open interest **increases**
- Existing buyer sells to new buyer → Open interest **unchanged**
- Existing buyer and seller both close → Open interest **decreases**
:::

## Example of Open Interest {data-state="grid-dense"}

**Example:**

- Day 1: Trader A buys 10 calls from Trader B → OI = 10
- Day 2: Trader C buys 5 from Trader D → OI = 15
- Day 3: Trader E buys 3 from Trader A → OI = 15 (unchanged)


## Volume and Open Interest Patterns {data-state="grid-medium"}

Understanding trading patterns:

::: {.incremental}
**Concentration Near Current Price:**

- Volume/open interest highest within 10-20% of current price
- Far OTM options trade infrequently
- Wider bid-ask spreads for less popular strikes

**Popularity of OTM Options:**

- Lower cost → higher leverage
- Attractive for speculation (large % returns possible)
- Used for tail risk hedging (portfolio insurance)
:::

## Life Cycle of Open Interest {data-state="grid-fine"}

Open interest evolves over an option's life:

::::  {.columns}
::: {.column width="40%"}
**Initial Growth:**

- Starts at zero for new series
- Grows as traders discover it
- Peaks when several weeks/months remain

:::

::: {.column width="40%"}
**Decline Phase:**

- Decreases as expiration approaches
- Traders close positions
- Risk managers avoid near-expiry options
:::
::: {.column width="30%"}
**Final Settlement:**

- ITM options: auto-exercised
- OTM options: expire worthless
:::
::::

## Payoff vs. Profit Diagrams {data-state="grid-coarse"}

Two important ways to visualize options:

::::  {.columns}
::: {.column width="50%"}
**Payoff Diagram**

- Shows intrinsic value at expiration
- Function of underlying price $S$
- Ignores premium paid/received
:::

::: {.column width="50%"}
**Profit Diagram**

- Shows actual profit/loss if held to expiration
- Payoff minus premium paid
- Or payoff plus premium received
:::
::::

## Long Call: Payoff and Profit {data-state="grid-none"}

Buying a call option (bullish strategy):

```{python}
#| label: fig-long-call-slides
#| fig-height: 450
#| echo: false

K = 100
premium = 5
S = np.concatenate([np.linspace(0, K, 50), np.linspace(K, 140, 50)])[:-1]

call_payoff = np.maximum(S - K, 0)
call_profit = call_payoff - premium

fig = go.Figure()
fig.add_trace(go.Scatter(x=S, y=call_payoff, mode='lines',
                        name='Payoff at Expiration', line=dict(color='blue', width=2)))
fig.add_trace(go.Scatter(x=S, y=call_profit, mode='lines',
                        name='Profit or Loss', line=dict(color='red', width=2, dash='dash')))
fig.add_vline(x=K, line_dash="dot", line_color="gray", annotation_text=f"Strike = ${K}")
fig.update_layout(xaxis_title="Underlying Price at Expiration ($)",
                 yaxis_title="Payoff or Profit ($)", template="plotly_white",
                 height=450, legend=dict(x=0.02, y=0.98),
                 yaxis_zeroline=False, xaxis_zeroline=True, xaxis_zerolinecolor='black')
fig.show()
```

## Long Call: Key Characteristics {data-state="grid-sparse"}

::: {.incremental}
**Market View:** Bullish (expect price to rise)

**Maximum Profit:** Unlimited (as $S$ increases)

**Maximum Loss:** Premium paid ($5 in example)

**Breakeven:** Strike + Premium = $105

**Best for:** Speculating on upside with limited downside risk
:::

## Long Put: Payoff and Profit {data-state="grid-none"}

Buying a put option (bearish strategy):

```{python}
#| label: fig-long-put-slides
#| fig-height: 450
#| echo: false

put_payoff = np.maximum(K - S, 0)
put_profit = put_payoff - premium

fig = go.Figure()
fig.add_trace(go.Scatter(x=S, y=put_payoff, mode='lines',
                        name='Payoff at Expiration', line=dict(color='blue', width=2)))
fig.add_trace(go.Scatter(x=S, y=put_profit, mode='lines',
                        name='Profit or Loss', line=dict(color='red', width=2, dash='dash')))
fig.add_vline(x=K, line_dash="dot", line_color="gray", annotation_text=f"Strike = ${K}")
fig.update_layout(xaxis_title="Underlying Price at Expiration ($)",
                 yaxis_title="Payoff or Profit ($)", template="plotly_white",
                 height=450, legend=dict(x=0.2, y=0.98),
                 yaxis_zeroline=False, xaxis_zeroline=True, xaxis_zerolinecolor='black')
fig.show()
```

## Long Put: Key Characteristics {data-state="grid-medium"}

::: {.incremental}
**Market View:** Bearish (expect price to fall)

**Maximum Profit:** Strike - Premium = $95 (limited by $S \geq 0$)

**Maximum Loss:** Premium paid ($5)

**Breakeven:** Strike - Premium = $95

**Best for:** Portfolio insurance, speculating on downside with limited risk
:::

## Short Call: Payoff and Profit {data-state="grid-none"}

Writing (selling) a call option:

```{python}
#| label: fig-short-call-slides
#| fig-height: 450
#| echo: false

short_call_payoff = -call_payoff
short_call_profit = premium - call_payoff

fig = go.Figure()
fig.add_trace(go.Scatter(x=S, y=short_call_payoff, mode='lines',
                        name='Payoff at Expiration', line=dict(color='blue', width=2)))
fig.add_trace(go.Scatter(x=S, y=short_call_profit, mode='lines',
                        name='Profit or Loss', line=dict(color='red', width=2, dash='dash')))
fig.add_vline(x=K, line_dash="dot", line_color="gray", annotation_text=f"Strike = ${K}")
fig.update_layout(xaxis_title="Underlying Price at Expiration ($)",
                 yaxis_title="Payoff or Profit ($)", template="plotly_white",
                 height=450, legend=dict(x=0.02, y=0.8),
                 yaxis_zeroline=False, xaxis_zeroline=True, xaxis_zerolinecolor='black')
fig.show()
```

## Short Call: Key Characteristics {data-state="grid-coarse"}

::: {.incremental}
**Market View:** Neutral to bearish (expect price to stay flat or fall)

**Maximum Profit:** Premium received ($5)

**Maximum Loss:** Unlimited (as $S$ increases)

**Breakeven:** Strike + Premium = $105

**Risk:** Very high! Limited upside, unlimited downside
:::

## Short Put: Payoff and Profit {data-state="grid-none"}

Writing (selling) a put option:

```{python}
#| label: fig-short-put-slides
#| fig-height: 450
#| echo: false

short_put_payoff = -put_payoff
short_put_profit = premium - put_payoff

fig = go.Figure()
fig.add_trace(go.Scatter(x=S, y=short_put_payoff, mode='lines',
                        name='Payoff at Expiration', line=dict(color='blue', width=2)))
fig.add_trace(go.Scatter(x=S, y=short_put_profit, mode='lines',
                        name='Profit or Loss', line=dict(color='red', width=2, dash='dash')))
fig.add_vline(x=K, line_dash="dot", line_color="gray", annotation_text=f"Strike = ${K}")
fig.update_layout(xaxis_title="Underlying Price at Expiration ($)",
                 yaxis_title="Payoff or Profit ($)", template="plotly_white",
                 height=450, legend=dict(x=0.02, y=0.98),
                 yaxis_zeroline=False, xaxis_zeroline=True, xaxis_zerolinecolor='black')
fig.show()
```

## Short Put: Key Characteristics {data-state="grid-medium"}

::: {.incremental}
**Market View:** Neutral to bullish (expect price to stay flat or rise)

**Maximum Profit:** Premium received ($5)

**Maximum Loss:** Strike - Premium = $95 (if $S \to 0$)

**Breakeven:** Strike - Premium = $95

**Use case:** Collect premium while willing to buy stock at strike price
:::

## Summary of Basic Option Positions {data-state="grid-fine"}

| Position | Market View | Max Profit | Max Loss | Breakeven |
|----------|-------------|------------|----------|-----------|
| **Long Call** | Bullish | Unlimited | Premium | $K +$ Premium |
| **Long Put** | Bearish | $K -$ Premium | Premium | $K -$ Premium |
| **Short Call** | Bearish | Premium | Unlimited | $K +$ Premium |
| **Short Put** | Bullish | Premium | $K -$ Premium | $K -$ Premium |

These four positions are the building blocks for all option strategies!

## Comparing Long vs. Short Positions {data-state="grid-fine"}

::::  {.columns}
::: {.column width="50%"}
**Long Positions (Buyers)**

- Pay premium upfront
- Limited downside (premium)
- Potentially large upside
- Time decay works against you
- Benefit from volatility
:::

::: {.column width="50%"}
**Short Positions (Sellers)**

- Receive premium upfront
- Limited upside (premium)
- Potentially large downside
- Time decay works for you
- Hurt by volatility
:::
::::


## Option Portfolios {data-state="grid-medium"}

Options can be combined with each other and with the underlying asset to create sophisticated strategies:

::: {.incremental}
- Combine multiple options with different strikes and types
- Create specific risk-reward profiles
- Implement views on market direction and volatility
- Use for hedging and income generation

**Key technique**: Portfolio payoff = sum of individual payoffs
:::

## Protective Put {data-state="grid-none"}

Long asset + Long put = Portfolio insurance

```{python}
#| label: fig-protective-put-slides
#| fig-height: 450
#| echo: false

S0 = 100
K_put = 95
S = np.arange(161)

asset_payoff = S
put_payoff = np.maximum(K_put - S, 0)
protective_put_payoff = asset_payoff + put_payoff

fig = go.Figure()
fig.add_trace(go.Scatter(x=S, y=asset_payoff, mode='lines',
                        name='Long Underlying Asset', line=dict(color='blue', dash='dot')))
fig.add_trace(go.Scatter(x=S, y=put_payoff, mode='lines',
                        name='Long Put', line=dict(color='green', dash='dot')))
fig.add_trace(go.Scatter(x=S, y=protective_put_payoff, mode='lines',
                        name='Protective Put', line=dict(color='red', width=3)))
fig.add_vline(x=K_put, line_dash="dot", line_color="gray",
              annotation_text=f"Put Strike = ${K_put}")
fig.update_layout(
    xaxis_title="Underlying Asset Price at Expiration ($)",
    yaxis_title="Portfolio Value ($)",
    template="plotly_white",
    height=450,
    legend=dict(x=0.02, y=0.98),
    yaxis_zeroline=False,
    xaxis_zeroline=True,
    xaxis_zerolinecolor='black'
)
fig.show()
```

## Protective Put: Key Insights {data-state="grid-medium"}

::: {.incremental}
**Function:** Portfolio insurance - downside protection while keeping upside

**Minimum Value:** Put strike ($95) - portfolio can never fall below this

**Maximum Value:** Unlimited (follows underlying asset upward)

**Cost:** Put premium reduces overall returns

**Use case:** Protecting existing stock holdings from market crashes
:::

## Covered Call {data-state="grid-none"}

Long asset + Short call = Income generation with capped upside

```{python}
#| label: fig-covered-call-slides
#| fig-height: 450
#| echo: false

K_call = 105
call_payoff = np.maximum(S - K_call, 0)
covered_call_payoff = asset_payoff - call_payoff

fig = go.Figure()
fig.add_trace(go.Scatter(x=S, y=asset_payoff, mode='lines',
                        name='Long Underlying Asset', line=dict(color='blue', dash='dot')))
fig.add_trace(go.Scatter(x=S, y=-call_payoff, mode='lines',
                        name='Short Call', line=dict(color='orange', dash='dot')))
fig.add_trace(go.Scatter(x=S, y=covered_call_payoff, mode='lines',
                        name='Covered Call', line=dict(color='red', width=3)))
fig.add_vline(x=K_call, line_dash="dot", line_color="gray",
              annotation_text=f"Call Strike = ${K_call}")
fig.update_layout(
    xaxis_title="Underlying Asset Price at Expiration ($)",
    yaxis_title="Portfolio Value ($)",
    template="plotly_white",
    height=450,
    legend=dict(x=0.02, y=0.98),
    yaxis_zeroline=False,
    xaxis_zeroline=True,
    xaxis_zerolinecolor='black'
)
fig.show()
```

## Covered Call: Key Insights {data-state="grid-sparse"}

::: {.incremental}
**Function:** Generate premium income from existing stock holdings

**Benefit:** Receive call premium upfront

**Cost:** Cap upside potential at strike price

**Trade-off:** Profitable if underlying stays flat or rises moderately; regret if underlying rises substantially
:::

## Collar {data-state="grid-none"}

Long asset + Long put + Short call = Protected range

```{python}
#| label: fig-collar-slides
#| fig-height: 450
#| echo: false

collar_payoff = asset_payoff + put_payoff - call_payoff

fig = go.Figure()
fig.add_trace(go.Scatter(x=S, y=asset_payoff, mode='lines',
                        name='Long Underlying Asset', line=dict(color='blue', dash='dot')))
fig.add_trace(go.Scatter(x=S, y=put_payoff, mode='lines',
                        name='Long Put', line=dict(color='green', dash='dot')))
fig.add_trace(go.Scatter(x=S, y=-call_payoff, mode='lines',
                        name='Short Call', line=dict(color='orange', dash='dot')))
fig.add_trace(go.Scatter(x=S, y=collar_payoff, mode='lines',
                        name='Collar', line=dict(color='red', width=3)))
fig.add_vline(x=K_put, line_dash="dot", line_color="gray",
              annotation_text=f"Put Strike = ${K_put}")
fig.add_vline(x=K_call, line_dash="dot", line_color="gray",
              annotation_text=f"Call Strike = ${K_call}")
fig.update_layout(
    xaxis_title="Underlying Asset Price at Expiration ($)",
    yaxis_title="Portfolio Value ($)",
    template="plotly_white",
    height=450,
    legend=dict(x=0.02, y=0.98),
    yaxis_zeroline=False,
    xaxis_zeroline=True,
    xaxis_zerolinecolor='black'
)
fig.show()
```

## Collar: Key Insights {data-state="grid-coarse"}

::: {.incremental}
**Function:** Downside protection funded by capping upside

**Range:** Portfolio value locked between put and call strikes

**Zero-cost collar:** Call premium ≈ Put premium

**Use case:** Risk management when you want to stay invested but limit both gains and losses
:::

## Bull Call Spread {data-state="grid-none"}

Long call (low strike) + Short call (high strike) = Bullish bet with limited risk

```{python}
#| label: fig-bull-spread-slides
#| fig-height: 450
#| echo: false

K_low = 95
K_high = 105

long_call_payoff = np.maximum(S - K_low, 0)
short_call_payoff = -np.maximum(S - K_high, 0)
bull_spread_payoff = long_call_payoff + short_call_payoff

fig = go.Figure()
fig.add_trace(go.Scatter(x=S, y=long_call_payoff, mode='lines',
                        name=f'Long {K_low} Call', line=dict(color='blue', dash='dot')))
fig.add_trace(go.Scatter(x=S, y=short_call_payoff, mode='lines',
                        name=f'Short {K_high} Call', line=dict(color='green', dash='dot')))
fig.add_trace(go.Scatter(x=S, y=bull_spread_payoff, mode='lines',
                        name='Bull Call Spread', line=dict(color='red', width=3)))
fig.add_vline(x=K_low, line_dash="dot", line_color="gray",
              annotation_text=f"Low Strike = ${K_low}")
fig.add_vline(x=K_high, line_dash="dot", line_color="gray",
              annotation_text=f"High Strike = ${K_high}")
fig.update_layout(
    xaxis_title="Underlying Asset Price at Expiration ($)",
    yaxis_title="Payoff ($)",
    template="plotly_white",
    height=450,
    legend=dict(x=0.02, y=0.98),
    yaxis_zeroline=False,
    xaxis_zeroline=True,
    xaxis_zerolinecolor='black'
)
fig.show()
```

## Bull Call Spread: Key Insights {data-state="grid-sparse"}

::: {.incremental}
**Function:** Low-cost bullish bet with limited upside

**Cost:** Net premium paid (lower than buying call alone)

**Profit potential:** Limited to strike difference minus net premium

**Use case:** Moderate bullish view, want to reduce cost vs. buying call outright
:::

## Bear Put Spread {data-state="grid-none"}

Long put (high strike) + Short put (low strike) = Bearish bet with limited risk

```{python}
#| label: fig-bear-spread-slides
#| fig-height: 450
#| echo: false

long_put_payoff = np.maximum(K_high - S, 0)
short_put_payoff = -np.maximum(K_low - S, 0)
bear_spread_payoff = long_put_payoff + short_put_payoff

fig = go.Figure()
fig.add_trace(go.Scatter(x=S, y=long_put_payoff, mode='lines',
                        name=f'Long {K_high} Put', line=dict(color='blue', dash='dot')))
fig.add_trace(go.Scatter(x=S, y=short_put_payoff, mode='lines',
                        name=f'Short {K_low} Put', line=dict(color='green', dash='dot')))
fig.add_trace(go.Scatter(x=S, y=bear_spread_payoff, mode='lines',
                        name='Bear Put Spread', line=dict(color='red', width=3)))
fig.add_vline(x=K_low, line_dash="dot", line_color="gray",
              annotation_text=f"Low Strike = ${K_low}")
fig.add_vline(x=K_high, line_dash="dot", line_color="gray",
              annotation_text=f"High Strike = ${K_high}")
fig.update_layout(
    xaxis_title="Underlying Asset Price at Expiration ($)",
    yaxis_title="Payoff ($)",
    template="plotly_white",
    height=450,
    legend=dict(x=0.02, y=0.77),
    yaxis_zeroline=False,
    xaxis_zeroline=True,
    xaxis_zerolinecolor='black'
)
fig.show()
```

## Bear Put Spread: Key Insights {data-state="grid-medium"}

::: {.incremental}
**Function:** Low-cost bearish bet or downside hedge

**Cost:** Net premium paid (lower than buying put alone)

**Profit potential:** Limited to strike difference minus net premium

**Use case:** Moderate bearish view or portfolio insurance at reduced cost
:::

## Straddle {data-state="grid-none"}

Long call + Long put (same strike) = Bet on volatility

```{python}
#| label: fig-straddle-slides
#| fig-height: 450
#| echo: false

K_straddle = 100
straddle_call_payoff = np.maximum(S - K_straddle, 0)
straddle_put_payoff = np.maximum(K_straddle - S, 0)
straddle_payoff = straddle_call_payoff + straddle_put_payoff

fig = go.Figure()
fig.add_trace(go.Scatter(x=S, y=straddle_call_payoff, mode='lines',
                        name=f'Long {K_straddle} Call', line=dict(color='blue', dash='dot')))
fig.add_trace(go.Scatter(x=S, y=straddle_put_payoff, mode='lines',
                        name=f'Long {K_straddle} Put', line=dict(color='green', dash='dot')))
fig.add_trace(go.Scatter(x=S, y=straddle_payoff, mode='lines',
                        name='Long Straddle', line=dict(color='red', width=3)))
fig.add_vline(x=K_straddle, line_dash="dot", line_color="gray",
              annotation_text=f"Strike = ${K_straddle}")
fig.update_layout(
    xaxis_title="Underlying Asset Price at Expiration ($)",
    yaxis_title="Payoff ($)",
    template="plotly_white",
    height=450,
    legend=dict(x=0.02, y=0.6),
    yaxis_zeroline=False,
    xaxis_zeroline=True,
    xaxis_zerolinecolor='black'
)
fig.show()
```

## Straddle: Key Insights {data-state="grid-sparse"}

::: {.incremental}
**Function:** Profit from large price movements in either direction

**Market view:** High volatility expected, but direction uncertain

**Cost:** Both call and put premiums (can be expensive)

**Breakeven:** Two points - one above and one below strike

**Use case:** Before major announcements or events with uncertain outcomes
:::

## Butterfly Spread {data-state="grid-none"}

Long 2 calls (low & high strike) + Short 2 calls (middle strike) = Bet on low volatility

```{python}
#| label: fig-butterfly-slides
#| fig-height: 450
#| echo: false

K_low_bf = 90
K_mid_bf = 100
K_high_bf = 110

bf_low_call = np.maximum(S - K_low_bf, 0)
bf_mid_call = -2 * np.maximum(S - K_mid_bf, 0)
bf_high_call = np.maximum(S - K_high_bf, 0)
butterfly_payoff = bf_low_call + bf_mid_call + bf_high_call

fig = go.Figure()
fig.add_trace(go.Scatter(x=S, y=bf_low_call, mode='lines',
                        name=f'Long {K_low_bf} Call', line=dict(color='blue', dash='dot')))
fig.add_trace(go.Scatter(x=S, y=bf_mid_call, mode='lines',
                        name=f'Short 2x {K_mid_bf} Calls', line=dict(color='green', dash='dot')))
fig.add_trace(go.Scatter(x=S, y=bf_high_call, mode='lines',
                        name=f'Long {K_high_bf} Call', line=dict(color='orange', dash='dot')))
fig.add_trace(go.Scatter(x=S, y=butterfly_payoff, mode='lines',
                        name='Butterfly Spread', line=dict(color='red', width=3)))
fig.add_vline(x=K_low_bf, line_dash="dot", line_color="gray",
              annotation_text=f"Low = ${K_low_bf}")
fig.add_vline(x=K_mid_bf, line_dash="dot", line_color="gray",
              annotation_text=f"Mid = ${K_mid_bf}")
fig.add_vline(x=K_high_bf, line_dash="dot", line_color="gray",
              annotation_text=f"High = ${K_high_bf}")
fig.update_layout(
    xaxis_title="Underlying Asset Price at Expiration ($)",
    yaxis_title="Payoff ($)",
    template="plotly_white",
    height=450,
    legend=dict(x=0.02, y=0.98),
    yaxis_zeroline=False,
    xaxis_zeroline=True,
    xaxis_zerolinecolor='black'
)
fig.show()
```

## Butterfly Spread: Key Insights {data-state="grid-medium"}

::: {.incremental}
**Function:** Profit if price stays near middle strike

**Market view:** Low volatility - price won't move much

**Cost:** Net premium paid (relatively low)

**Maximum profit:** At middle strike

**Use case:** When you expect prices to remain stable
:::

## Interactive Portfolio Builder {data-state="grid-none"}

Experiment with your own option combinations:

::: {#fig-option-portfolios-slides}
<iframe width="100%" height="700" src="https://option-portfolios.koyeb.app"></iframe>
:::

## Put-Call Parity {data-state="grid-medium"}

For European options, a fundamental no-arbitrage relationship:

$$\text{Cash} + \text{Call} = \text{Put} + \text{Underlying}$$

More precisely:

$$\mathrm{e}^{-rT}K + C = P + S$$

where $\mathrm{e}^{-rT}K$ = present value of strike price

::: {.fragment}
**Key insight:** Two portfolios with identical payoffs must have identical prices
:::

## Put-Call Parity: The Logic {data-state="grid-coarse"}

Compare payoffs at expiration:

::::  {.columns}
::: {.column width="50%"}
**Portfolio A: Cash + Call**

If $S_T > K$:

- Cash → $K$
- Call → $S_T - K$
- Total = $S_T$

If $S_T \leq K$:

- Cash → $K$
- Call → $0$
- Total = $K$
:::

::: {.column width="50%"}
**Portfolio B: Put + Underlying**

If $S_T > K$:

- Put → $0$
- Asset → $S_T$
- Total = $S_T$

If $S_T \leq K$:

- Put → $K - S_T$
- Asset → $S_T$
- Total = $K$
:::
::::

Identical payoffs → Identical prices!

## Put-Call Parity: Applications {data-state="grid-sparse"}

::: {.incremental}

**1. Option Pricing:**

- Know call, underlying, risk-free rate → compute put price
- Know put, underlying, risk-free rate → compute call price

**2. Synthetic Instruments:**

- Synthetic call: $C = P + S - K\mathrm{e}^{-rT}$
- Synthetic put: $P = C - S + K\mathrm{e}^{-rT}$
- Synthetic underlying: $S = C - P + K\mathrm{e}^{-rT}$

**3. Arbitrage Detection:**

- Professional traders identify mispriced options
- Construct conversion and reversal strategies
:::

## Put-Call Parity: Limitations {data-state="grid-coarse"}

Important restrictions:

::: {.incremental}
- **European options only** (not American)
- **Non-dividend-paying assets** (dividends complicate the relationship)
- **Same strike and expiration** for both call and put
- **Perfect markets** (no transaction costs, borrowing restrictions)

For American options: relationship becomes an inequality

For dividend-paying assets: subtract PV of dividends from $S$
:::

## Early Exercise: General Principles {data-state="grid-medium"}

Should you exercise an American option early?

::: {.incremental}
**Option value = Intrinsic value + Time value**

- **Intrinsic value**: What you get from exercising now
- **Time value**: Value of future flexibility

**Early exercise destroys time value!**

Only exercise early when time value = 0
:::

## American Calls: Never Exercise Early* {data-state="grid-coarse"}

For calls on **non-dividend-paying** assets:

::: {.incremental}
**Reason #1:** Flexibility is valuable
- "Options are better alive than dead"
- Keeping your options open has value

**Reason #2:** Time value of money
- Early exercise means paying strike now
- Foregone interest on that cash

**Mathematical proof:** From put-call parity, $C > S - K$ always

*Exception: May be optimal just before large dividends
:::

## American Puts: Sometimes Exercise Early {data-state="grid-medium"}

For puts, time value of money works in reverse:

::: {.incremental}
**Why early exercise can be optimal:**

- Receive strike early → invest and earn interest
- When deep in the money, flexibility has little value
- Higher interest rates → more incentive to exercise

**Optimal when:** Put is deep ITM + interest rates high + low volatility

**Mathematical insight:** $P = K - S$ is possible (time value = 0)
:::

## Put-Call Parity and Early Exercise {data-state="grid-sparse"}

From European put-call parity: $C + \mathrm{e}^{-rT}K = P + S$

::: {.incremental}
**For calls:** Since $P \geq 0$,
$$C \geq S - \mathrm{e}^{-rT}K > S - K$$
Call value strictly exceeds intrinsic value → don't exercise early

**For puts:** Since $C \geq 0$,
$$P \geq \mathrm{e}^{-rT}K - S$$
But intrinsic value is $K - S$, which could be larger!
$$K - S > \mathrm{e}^{-rT}K - S$$
Put time value can shrink to zero → early exercise possible
:::

## Summary: Key Takeaways {data-state="grid-medium"}

::: {.incremental}
1. **Options are versatile** - building blocks for complex strategies

2. **Payoff diagrams** - visualize by summing individual positions

3. **Market patterns** - OTM options popular, OI follows predictable life cycle

4. **Put-call parity** - fundamental no-arbitrage relationship

5. **Early exercise** - rarely optimal for calls, sometimes optimal for puts

6. **Portfolio construction** - combine options for specific risk/reward profiles
:::

## Next Steps {data-state="grid-coarse"}

Building on this foundation:

::: {.incremental}
- **Option pricing models**: Black-Scholes formula, binomial trees
- **Greeks and sensitivity analysis**: Delta, gamma, theta, vega
- **Volatility**: Historical vs. implied, volatility surfaces
- **Advanced hedging**: Delta hedging, portfolio insurance
- **Real-world considerations**: Transaction costs, liquidity, market microstructure
:::

